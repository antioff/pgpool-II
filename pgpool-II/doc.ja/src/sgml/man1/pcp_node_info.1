'\" t
.\"     Title: pcp_node_info
.\"    Author: The Pgpool Global Development Group
.\" Generator: DocBook XSL Stylesheets v1.78.1 <http://docbook.sf.net/>
.\"      Date: 2021
.\"    Manual: Pgpool-II 4.2.4 文書
.\"    Source: Pgpool-II 4.2.4
.\"  Language: Japanese
.\"
.TH "PCP_NODE_INFO" "1" "2021" "Pgpool-II 4.2.4" "Pgpool-II 4.2.4 文書"
.\" -----------------------------------------------------------------
.\" * Define some portability stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.debian.org/507673
.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "名前"
pcp_node_info \- 指定されたノードの情報を表示する
.SH "概要"
.HP \w'\fBpcp_node_info\fR\ 'u
\fBpcp_node_info\fR [\fIoption\fR...] [\fInode_id\fR]
.SH "説明"
.PP
\fBpcp_node_info\fR
指定されたノードの情報を表示します。
.SH "オプション"
.PP
.PP
\fB\-n \fR\fB\fInode_id\fR\fR
.br
\fB\-\-node\-id=\fR\fB\fInode_id\fR\fR
.RS 4
情報を表示するバックエンドノードのインデックスを指定します。
.RE
.PP
\fBその他 \fR
.RS 4
\fBpcp_common_options\fR(1)
を参照してください。
.RE
.SH "例"
.PP
ここでは例を示します。
.sp
.if n \{\
.RS 4
.\}
.nf
    $ pcp_node_info \-h localhost \-U postgres 1
    /tmp 11003 2 0\&.500000 up standby 0 streaming async 2019\-04\-23 13:58:40
   
.fi
.if n \{\
.RE
.\}
.PP
結果は以下の順のとおりです。
.sp
.if n \{\
.RS 4
.\}
.nf
    
    1\&. ノードのホスト名
    2\&. ノードのポート番号
    3\&. ステータス
    4\&. ロードバランスウェイト
    5\&. バックエンド状態名
    6\&. バックエンドの役割
    7\&. レプリケーションの遅延
    8\&. レプリケーション状態 (PostgreSQL 9\&.1以降。pg_stat_replicationから取得)
    9\&. 同期レプリケーション状態 (PostgreSQL 9\&.2以降。pg_stat_replicationから取得)
    10\&. 最終ステータス変更時刻
   
.fi
.if n \{\
.RE
.\}
.PP
7, 8, 9は、sr_check_periodが0以外でなければ正しく表示されません。 また、8, 9は、sr_check_userがPostgreSQLのスーパーユーザーであるか、"pg_monitor"グループに所属していなけれ正しく表示されません。
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fB注記\fR
.ps -1
.br
.PP
sr_check_userをpg_monitorグループに所属させるには、以下のSQLコマンドをPostgreSQLスーパーユーザーで実行してください（"sr_check_user"をsr_check_userの設定値で置き換えてください）
.sp
.if n \{\
.RS 4
.\}
.nf
	  GRANT pg_monitor TO sr_check_user;
	 
.fi
.if n \{\
.RE
.\}
.sp
PostgreSQL
9\&.6にはpg_monitorグループがないので、sr_check_userはPostgreSQLのスーパーユーザーでなければなりません。
.sp .5v
.RE
ステータスは [0\&.\&.3] までの数字で表わされます。各数字の意味は以下のとおりです。
.PP
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
0 \- 初期化時のみに表われる。PCP コマンドで表示されることはない。
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
1 \- ノード稼働中。接続無し
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
2 \- ノード稼働中。接続有り
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
3 \- ノードダウン
.RE
.PP
ロードバランスウェイトは Normalize されたフォーマットで出力されます。
.PP
\fB\-\-verbose\fR
オプションは出力内容を理解するのに役に立ちます。例：
.sp
.if n \{\
.RS 4
.\}
.nf
   $ pcp_node_info \-\-verbose \-h localhost \-U postgres 1
   Hostname               : /tmp
   Port                   : 11003
   Status                 : 2
   Weight                 : 0\&.500000
   Status Name            : up
   Role                   : standby
   Replication Delay      : 0
   Replication State      : streaming
   Replication Sync State : async
   Last Status Change     : 2019\-04\-23 13:58:40
  
.fi
.if n \{\
.RE
.\}
