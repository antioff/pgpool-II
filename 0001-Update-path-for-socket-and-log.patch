From 991749057b57ac81ff0c10002891851fd8cdd668 Mon Sep 17 00:00:00 2001
From: Alexey Shabalin <shaba@altlinux.org>
Date: Sun, 7 Feb 2021 18:08:25 +0300
Subject: [PATCH] Update path for socket and log

---
 src/include/pool.h                        |  6 +++---
 src/sample/pgpool.conf.sample-logical     | 12 ++++++------
 src/sample/pgpool.conf.sample-raw         |  8 ++++----
 src/sample/pgpool.conf.sample-replication |  8 ++++----
 src/sample/pgpool.conf.sample-slony       |  8 ++++----
 src/sample/pgpool.conf.sample-snapshot    |  8 ++++----
 src/sample/pgpool.conf.sample-stream      |  8 ++++----
 7 files changed, 29 insertions(+), 29 deletions(-)

diff --git a/src/include/pool.h b/src/include/pool.h
index 23599eb..875ea32 100644
--- a/src/include/pool.h
+++ b/src/include/pool.h
@@ -69,13 +69,13 @@
 #define HBA_CONF_FILE_NAME "pool_hba.conf"
 
 /* pid file directory */
-#define DEFAULT_LOGDIR "/tmp"
+#define DEFAULT_LOGDIR "/var/log/pgpool"
 
 /* Unix domain socket directory */
-#define DEFAULT_SOCKET_DIR "/tmp"
+#define DEFAULT_SOCKET_DIR "/var/run/pgpool"
 
 /* Unix domain socket directory for watchdog IPC */
-#define DEFAULT_WD_IPC_SOCKET_DIR "/tmp"
+#define DEFAULT_WD_IPC_SOCKET_DIR "/var/run/pgpool"
 
 /* pid file name */
 #define DEFAULT_PID_FILE_NAME "/var/run/pgpool/pgpool.pid"
diff --git a/src/sample/pgpool.conf.sample-logical b/src/sample/pgpool.conf.sample-logical
index ba3a0a3..d9aaf3f 100644
--- a/src/sample/pgpool.conf.sample-logical
+++ b/src/sample/pgpool.conf.sample-logical
@@ -35,10 +35,10 @@ listen_addresses = 'localhost'
                                    # Host name or IP address to listen on:
                                    # '*' for all, '' for no TCP/IP connections
                                    # (change requires restart)
-port = 9999
+port = 5433
                                    # Port number
                                    # (change requires restart)
-socket_dir = '/tmp'
+socket_dir = '/var/run/pgpool'
                                    # Unix domain socket path
                                    # The Debian package defaults to
                                    # /var/run/postgresql
@@ -58,7 +58,7 @@ pcp_listen_addresses = '*'
 pcp_port = 9898
                                    # Port number for pcp
                                    # (change requires restart)
-pcp_socket_dir = '/tmp'
+pcp_socket_dir = '/var/run/pgpool'
                                    # Unix domain socket path for pcp
                                    # The Debian package defaults to
                                    # /var/run/postgresql
@@ -257,7 +257,7 @@ syslog_ident = 'pgpool'
 
 # -- Only used if logging_collector is on ---
 
-#log_directory = '/tmp/pgpool_log'      # directory where log files are written,
+#log_directory = '/var/log/pgpool'      # directory where log files are written,
                                         # can be absolute
 #log_filename = 'pgpool-%Y-%m-%d_%H%M%S.log'
                                         # log file name pattern,
@@ -292,7 +292,7 @@ pid_file_name = '/var/run/pgpool/pgpool.pid'
                                    # location of pgpool.conf file or
                                    # as an absolute path
                                    # (change requires restart)
-logdir = '/tmp'
+logdir = '/var/log/pgpool'
                                    # Directory of pgPool status file
                                    # (change requires restart)
 
@@ -621,7 +621,7 @@ wd_authkey = ''
                                     # Authentication key for watchdog communication
                                     # (change requires restart)
 
-wd_ipc_socket_dir = '/tmp'
+wd_ipc_socket_dir = '/var/run/pgpool'
                                     # Unix domain socket path for watchdog IPC socket
                                     # The Debian package defaults to
                                     # /var/run/postgresql
diff --git a/src/sample/pgpool.conf.sample-raw b/src/sample/pgpool.conf.sample-raw
index 6d3cf52..554ac16 100644
--- a/src/sample/pgpool.conf.sample-raw
+++ b/src/sample/pgpool.conf.sample-raw
@@ -39,7 +39,7 @@ listen_addresses = 'localhost'
 port = 9999
                                    # Port number
                                    # (change requires restart)
-socket_dir = '/tmp'
+socket_dir = '/var/run/pgpool'
                                    # Unix domain socket path
                                    # The Debian package defaults to
                                    # /var/run/postgresql
@@ -59,7 +59,7 @@ pcp_listen_addresses = '*'
 pcp_port = 9898
                                    # Port number for pcp
                                    # (change requires restart)
-pcp_socket_dir = '/tmp'
+pcp_socket_dir = '/var/run/pgpool'
                                    # Unix domain socket path for pcp
                                    # The Debian package defaults to
                                    # /var/run/postgresql
@@ -258,7 +258,7 @@ syslog_ident = 'pgpool'
 
 # -- Only used if logging_collector is on ---
 
-#log_directory = '/tmp/pgpool_log'      # directory where log files are written,
+#log_directory = '/var/log/pgpool'      # directory where log files are written,
                                         # can be absolute
 #log_filename = 'pgpool-%Y-%m-%d_%H%M%S.log'
                                         # log file name pattern,
@@ -293,7 +293,7 @@ pid_file_name = '/var/run/pgpool/pgpool.pid'
                                    # location of pgpool.conf file or
                                    # as an absolute path
                                    # (change requires restart)
-logdir = '/tmp'
+logdir = '/var/log/pgpool'
                                    # Directory of pgPool status file
                                    # (change requires restart)
 
diff --git a/src/sample/pgpool.conf.sample-replication b/src/sample/pgpool.conf.sample-replication
index 08d11ec..b28b03a 100644
--- a/src/sample/pgpool.conf.sample-replication
+++ b/src/sample/pgpool.conf.sample-replication
@@ -39,7 +39,7 @@ listen_addresses = 'localhost'
 port = 9999
                                    # Port number
                                    # (change requires restart)
-socket_dir = '/tmp'
+socket_dir = '/var/run/pgpool'
                                    # Unix domain socket path
                                    # The Debian package defaults to
                                    # /var/run/postgresql
@@ -65,7 +65,7 @@ pcp_listen_addresses = '*'
 pcp_port = 9898
                                    # Port number for pcp
                                    # (change requires restart)
-pcp_socket_dir = '/tmp'
+pcp_socket_dir = '/var/run/pgpool'
                                    # Unix domain socket path for pcp
                                    # The Debian package defaults to
                                    # /var/run/postgresql
@@ -253,7 +253,7 @@ syslog_ident = 'pgpool'
 
 # -- Only used if logging_collector is on ---
 
-#log_directory = '/tmp/pgpool_log'      # directory where log files are written,
+#log_directory = '/var/log/pgpool'      # directory where log files are written,
                                         # can be absolute
 #log_filename = 'pgpool-%Y-%m-%d_%H%M%S.log'
                                         # log file name pattern,
@@ -288,7 +288,7 @@ pid_file_name = '/var/run/pgpool/pgpool.pid'
                                    # location of pgpool.conf file or
                                    # as an absolute path
                                    # (change requires restart)
-logdir = '/tmp'
+logdir = '/var/log/pgpool'
                                    # Directory of pgPool status file
                                    # (change requires restart)
 
diff --git a/src/sample/pgpool.conf.sample-slony b/src/sample/pgpool.conf.sample-slony
index 004bdac..71ef8b5 100644
--- a/src/sample/pgpool.conf.sample-slony
+++ b/src/sample/pgpool.conf.sample-slony
@@ -39,7 +39,7 @@ listen_addresses = 'localhost'
 port = 9999
                                    # Port number
                                    # (change requires restart)
-socket_dir = '/tmp'
+socket_dir = '/var/run/pgpool'
                                    # Unix domain socket path
                                    # The Debian package defaults to
                                    # /var/run/postgresql
@@ -65,7 +65,7 @@ pcp_listen_addresses = '*'
 pcp_port = 9898
                                    # Port number for pcp
                                    # (change requires restart)
-pcp_socket_dir = '/tmp'
+pcp_socket_dir = '/var/run/pgpool'
                                    # Unix domain socket path for pcp
                                    # The Debian package defaults to
                                    # /var/run/postgresql
@@ -254,7 +254,7 @@ syslog_ident = 'pgpool'
 
 # -- Only used if logging_collector is on ---
 
-#log_directory = '/tmp/pgpool_log'      # directory where log files are written,
+#log_directory = '/var/log/pgpool'      # directory where log files are written,
                                         # can be absolute
 #log_filename = 'pgpool-%Y-%m-%d_%H%M%S.log'
                                         # log file name pattern,
@@ -289,7 +289,7 @@ pid_file_name = '/var/run/pgpool/pgpool.pid'
                                    # location of pgpool.conf file or
                                    # as an absolute path
                                    # (change requires restart)
-logdir = '/tmp'
+logdir = '/var/log/pgpool'
                                    # Directory of pgPool status file
                                    # (change requires restart)
 
diff --git a/src/sample/pgpool.conf.sample-snapshot b/src/sample/pgpool.conf.sample-snapshot
index 8cf4123..da4b824 100644
--- a/src/sample/pgpool.conf.sample-snapshot
+++ b/src/sample/pgpool.conf.sample-snapshot
@@ -39,7 +39,7 @@ listen_addresses = 'localhost'
 port = 9999
                                    # Port number
                                    # (change requires restart)
-socket_dir = '/tmp'
+socket_dir = '/var/run/pgpool'
                                    # Unix domain socket path
                                    # The Debian package defaults to
                                    # /var/run/postgresql
@@ -65,7 +65,7 @@ pcp_listen_addresses = '*'
 pcp_port = 9898
                                    # Port number for pcp
                                    # (change requires restart)
-pcp_socket_dir = '/tmp'
+pcp_socket_dir = '/var/run/pgpool'
                                    # Unix domain socket path for pcp
                                    # The Debian package defaults to
                                    # /var/run/postgresql
@@ -251,7 +251,7 @@ syslog_ident = 'pgpool'
 
 # -- Only used if logging_collector is on ---
 
-#log_directory = '/tmp/pgpool_log'      # directory where log files are written,
+#log_directory = '/var/log/pgpool'      # directory where log files are written,
                                         # can be absolute
 #log_filename = 'pgpool-%Y-%m-%d_%H%M%S.log'
                                         # log file name pattern,
@@ -286,7 +286,7 @@ pid_file_name = '/var/run/pgpool/pgpool.pid'
                                    # location of pgpool.conf file or
                                    # as an absolute path
                                    # (change requires restart)
-logdir = '/tmp'
+logdir = '/var/log/pgpool'
                                    # Directory of pgPool status file
                                    # (change requires restart)
 
diff --git a/src/sample/pgpool.conf.sample-stream b/src/sample/pgpool.conf.sample-stream
index 96630d5..172a6f6 100644
--- a/src/sample/pgpool.conf.sample-stream
+++ b/src/sample/pgpool.conf.sample-stream
@@ -39,7 +39,7 @@ listen_addresses = 'localhost'
 port = 9999
                                    # Port number
                                    # (change requires restart)
-socket_dir = '/tmp'
+socket_dir = '/var/run/pgpool'
                                    # Unix domain socket path
                                    # The Debian package defaults to
                                    # /var/run/postgresql
@@ -59,7 +59,7 @@ pcp_listen_addresses = '*'
 pcp_port = 9898
                                    # Port number for pcp
                                    # (change requires restart)
-pcp_socket_dir = '/tmp'
+pcp_socket_dir = '/var/run/pgpool'
                                    # Unix domain socket path for pcp
                                    # The Debian package defaults to
                                    # /var/run/postgresql
@@ -258,7 +258,7 @@ syslog_ident = 'pgpool'
 
 # -- Only used if logging_collector is on ---
 
-#log_directory = '/tmp/pgpool_log'      # directory where log files are written,
+#log_directory = '/var/log/pgpool'      # directory where log files are written,
                                         # can be absolute
 #log_filename = 'pgpool-%Y-%m-%d_%H%M%S.log'
                                         # log file name pattern,
@@ -292,7 +292,7 @@ pid_file_name = '/var/run/pgpool/pgpool.pid'
                                    # location of pgpool.conf file or
                                    # as an absolute path
                                    # (change requires restart)
-logdir = '/tmp'
+logdir = '/var/log/pgpool'
                                    # Directory of pgPool status file
                                    # (change requires restart)
 
--
libgit2 1.1.0

